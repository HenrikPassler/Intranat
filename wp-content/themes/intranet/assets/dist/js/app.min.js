var Intranet;Intranet=Intranet||{},Intranet.Search=Intranet.Search||{},Intranet.Search.Sites=function(t){function e(){s=t('form.network-search button[type="submit"]').html(),t('form.network-search input[type="search"]').on("input",function(e){clearTimeout(r),$searchInput=t(e.target).closest('input[type="search"]');var n=$searchInput.val();return n.length<2?(t('form.network-search button[type="submit"]').html(s),t(".network-search-results-items").remove(),void t(".network-search-results .my-networks").show()):(t('form.network-search button[type="submit"]').html('<i class="loading-dots loading-dots-highight"></i>'),void(r=setTimeout(function(){this.search(n)}.bind(this),1e3)))}.bind(this)),t("form.network-search").on("submit",function(e){e.preventDefault(),clearTimeout(r),t('form.network-search button[type="submit"]').html('<i class="loading-dots loading-dots-highight"></i>'),$searchInput=t(e.target).find('input[type="search"]');var s=$searchInput.val();this.search(s,!0)}.bind(this))}var r=!1,s=!1;return e.prototype.search=function(e,r){"undefined"==typeof r&&(r=!1);var n={action:"search_sites",s:e};t.post(ajaxurl,n,function(n){0!==n.length&&(t.each(n,function(t,s){return this.emptyResults(),r&&e.toLowerCase()==s.name.toLowerCase()||s.short_name.length&&e.toLowerCase()==s.short_name.toLowerCase()?void(window.location=s.path):void this.addResult(s.domain,s.path,s.name,s.short_name)}.bind(this)),s&&t('form.network-search button[type="submit"]').html(s))}.bind(this),"JSON")},e.prototype.addResult=function(e,r,s,n){return t(".network-search-results .my-networks").hide(),0===t(".network-search-results-items").length&&t(".network-search-results").append('<ul class="network-search-results-items"></ul>'),n?void t(".network-search-results-items").append('<li class="network-title"><a href="'+e+r+'">'+n+" <em>"+s+"</em></a></li>"):void t(".network-search-results-items").append('<li class="network-title"><a href="'+e+r+'">'+s+"</a></li>")},e.prototype.emptyResults=function(){t(".network-search-results-items").empty()},new e}(jQuery),Intranet=Intranet||{},Intranet.User=Intranet.User||{},Intranet.User.Subscribe=function(t){function e(){t("[data-subscribe]").on("click",function(e){e.preventDefault();var r=t(e.target).closest("[data-subscribe]"),s=r.attr("data-subscribe");this.toggleSubscription(s,r)}.bind(this))}return e.prototype.toggleSubscription=function(e,r){var s={action:"toggle_subscription",blog_id:e};t.post(ajaxurl,s,function(t){"subscribed"==t?r.html('<i class="fa fa-minus-circle"></i> Unsubscribe'):r.html('<i class="fa fa-plus-circle"></i> Subscribe')})},new e}(jQuery);