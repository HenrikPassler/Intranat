Intranet=Intranet||{},Intranet.Stripe=function(t){function e(){var e=null;t(".stripe").length>0&&(e=[municipioIntranet.themeUrl+"/assets/sound/a.mp3",municipioIntranet.themeUrl+"/assets/sound/b.mp3",municipioIntranet.themeUrl+"/assets/sound/c.mp3",municipioIntranet.themeUrl+"/assets/sound/e.mp3",municipioIntranet.themeUrl+"/assets/sound/g.mp3"],t.each(e,function(t,e){new Audio(e)}),t(".stripe").addClass("easter-egg")),t(".stripe div").on("click",function(n){var i=t(this).index(),s=new Audio(e[i]);s.play(),s.addEventListener("ended",function(){this.remove()})})}return new e}(jQuery);var Intranet;Intranet=Intranet||{},Intranet.Search=Intranet.Search||{},Intranet.Search.Sites=function(t){function e(){i=t('form.network-search button[type="submit"]').html(),t('form.network-search input[type="search"]').on("input",function(e){clearTimeout(n),$searchInput=t(e.target).closest('input[type="search"]');var s=$searchInput.val();return s.length<2?(t('form.network-search button[type="submit"]').html(i),t(".network-search-results-items").remove(),void t(".network-search-results .my-networks").show()):(t('form.network-search button[type="submit"]').html('<i class="loading-dots loading-dots-highight"></i>'),void(n=setTimeout(function(){this.search(s)}.bind(this),1e3)))}.bind(this)),t("form.network-search").on("submit",function(e){e.preventDefault(),clearTimeout(n),t('form.network-search button[type="submit"]').html('<i class="loading-dots loading-dots-highight"></i>'),$searchInput=t(e.target).find('input[type="search"]');var i=$searchInput.val();this.search(i,!0)}.bind(this))}var n=!1,i=!1;return e.prototype.search=function(e,n){"undefined"==typeof n&&(n=!1);var s={action:"search_sites",s:e};t.post(ajaxurl,s,function(s){0!==s.length&&(t.each(s,function(t,i){return this.emptyResults(),n&&e.toLowerCase()==i.name.toLowerCase()||i.short_name.length&&e.toLowerCase()==i.short_name.toLowerCase()?void(window.location=i.path):void this.addResult(i.domain,i.path,i.name,i.short_name)}.bind(this)),i&&t('form.network-search button[type="submit"]').html(i))}.bind(this),"JSON")},e.prototype.addResult=function(e,n,i,s){return t(".network-search-results .my-networks").hide(),0===t(".network-search-results-items").length&&t(".network-search-results").append('<ul class="network-search-results-items"></ul>'),s?void t(".network-search-results-items").append('<li class="network-title"><a href="//'+e+n+'">'+s+" <em>"+i+"</em></a></li>"):void t(".network-search-results-items").append('<li class="network-title"><a href="//'+e+n+'">'+i+"</a></li>")},e.prototype.emptyResults=function(){t(".network-search-results-items").empty()},new e}(jQuery),Intranet=Intranet||{},Intranet.User=Intranet.User||{},Intranet.User.Links=function(t){function e(){t("[data-user-link-edit]").on("click",function(t){this.toggleEdit(t.target)}.bind(this)),t("[data-user-link-add]").on("submit",function(e){e.preventDefault(),$element=t(e.target).closest("form").parents(".box");var n=t(e.target).closest("form").find('[name="user-link-title"]').val(),i=t(e.target).closest("form").find('[name="user-link-url"]').val();this.addLink(n,i,$element)}.bind(this)),t(document).on("click","[data-user-link-remove]",function(e){e.preventDefault();var n=t(e.target).closest("button").parents(".box"),i=t(e.target).closest("button").attr("data-user-link-remove");this.removeLink(n,i)}.bind(this))}return e.prototype.toggleEdit=function(e){return $target=t(e).closest("[data-user-link-edit]"),$box=$target.parents(".box"),$box.hasClass("is-editing")?($box.removeClass("is-editing"),void $target.html('<i class="fa fa-edit"></i> Edit')):($box.addClass("is-editing"),void $target.html('<i class="fa fa-check"></i> Done'))},e.prototype.addLink=function(e,n,i){var s={action:"add_user_link",title:e,url:n};t.post(ajaxurl,s,function(e){"object"==typeof e&&(i.find("ul.links").empty(),t.each(e,function(t,e){this.addLinkToDom(i,e)}.bind(this)))}.bind(this),"JSON")},e.prototype.addLinkToDom=function(t,e){var n=t.find("ul.links");0===n.length&&(t.find(".box-content").html('<ul class="links"></ul>'),n=t.find("ul.links")),n.append('            <li>                <a class="link-item link-item-light" href="'+e.url+'">'+e.title+'</a>                <button class="btn btn-icon btn-sm text-lg pull-right only-if-editing" data-user-link-remove="'+e.url+'">&times;</button>            </li>        ')},e.prototype.removeLink=function(e,n){var i={action:"remove_user_link",url:n};t.post(ajaxurl,i,function(n){"object"==typeof n&&(0===n.length&&(e.find("ul.links").remove(),e.find(".box-content").text(municipioIntranet.user_links_is_empty)),e.find("ul.links").empty(),t.each(n,function(t,n){this.addLinkToDom(e,n)}.bind(this)))}.bind(this),"JSON")},new e}(jQuery),Intranet=Intranet||{},Intranet.User=Intranet.User||{},Intranet.User.Subscribe=function(t){function e(){t("[data-subscribe]").on("click",function(e){e.preventDefault();var n=t(e.target).closest("[data-subscribe]"),i=n.attr("data-subscribe");this.toggleSubscription(i,n)}.bind(this))}return e.prototype.toggleSubscription=function(e,n){var i={action:"toggle_subscription",blog_id:e};t.post(ajaxurl,i,function(t){"subscribed"==t?n.html('<i class="fa fa-minus-circle"></i> '+municipioIntranet.unsubscribe):n.html('<i class="fa fa-plus-circle"></i> '+municipioIntranet.subscribe)})},new e}(jQuery);